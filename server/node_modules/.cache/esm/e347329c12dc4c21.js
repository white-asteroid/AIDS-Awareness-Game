let express,mongoose,cors,readdirSync;_12d‍.w("express",[["default",["express"],function(v){express=v}]]);_12d‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_12d‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_12d‍.w("fs",[["readdirSync",["readdirSync"],function(v){readdirSync=v}]]);



const morgan = require("morgan");
require("dotenv").config();

const app = express();

mongoose
    .connect(process.env.DATABASE, {
        useNewUrlParser: true, 
        // userFindAndModify:false,
        useUnifiedTopology: true, 
        // userCreateIndex:true,
    })
    .then(()=>console.log("DB connected kya baat hai into 2"))
    .catch((err)=>_12d‍.g.console.log("jindagi ka naam hi error hai laale ",err));

    app.use(express.json({limit : "5mb"}));
    app.use(express.urlencoded({extended : "true"}));
    // app.use(cors({origin:["http://localhost:3000"], }));

    app.use(cors());

    // app.post("/api/login",(req,res)=>{
    //     console.log("Register endpoint -> ",req.body);
    // });
    readdirSync('./routes').map((r)=>{
        app.use("/api",require(`./routes/${r}`));
    });

    const port = process.env.PORT || 8000;
     
    app.listen(port, ()=> console.log(`Server is running at port : ${port}` ));

